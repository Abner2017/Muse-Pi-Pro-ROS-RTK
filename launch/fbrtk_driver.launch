<?xml version="1.0"?>
<launch>
    <!-- FB-RTK Driver Node (Combined driver and control) -->
    <node pkg="fbrtkros" type="fbrtk_driver_node" name="fbrtk_driver" output="screen">
        <!-- Serial port configuration (fixed for FB-RTK device) -->
        <param name="port" value="/dev/ttyACM2" />
        <param name="baudrate" value="115200" />
        
        <!-- Frame IDs -->
        <param name="imu_frame_id" value="imu_link" />
        <param name="gps_frame_id" value="gps_link" />
        <param name="base_frame_id" value="base_link" />
    <param name="baro_frame_id" value="baro_link" />
        
        <!-- Velocity limits for robot control -->
        <param name="max_linear_velocity" value="1.0" />
        <param name="max_angular_velocity" value="1.0" />

    <!-- Barometer scaling (if needed) -->
    <param name="baro_pressure_scale" value="1.0" />
    <!-- altitude raw assumed in cm -> meters -->
    <param name="baro_altitude_scale" value="0.01" />
        
        <!-- Safety parameters -->
        <param name="cmd_timeout" value="1.0" />
    </node>
    
    <!-- Static transforms -->
    <node pkg="tf2_ros" type="static_transform_publisher" name="base_to_imu"
          args="0 0 0.1 0 0 0 base_link imu_link" />
    
    <node pkg="tf2_ros" type="static_transform_publisher" name="base_to_gps"
          args="0 0 0.2 0 0 0 base_link gps_link" />

</launch>
